<!--
Modified and derived from 
<https://code.google.com/apis/ajax/playground/?type=visualization#scatter_chart> which is under an Apache 2.0 License
<http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-selecting-files-dnd>
-->

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>

<title>
  Visualize Netlist File for Programming Assignment #3
</title>

<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load('visualization', '1', {packages: ['corechart']});
</script>

<style>
  #drop_zone{
    border:2px dashed #bbb;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    border-radius:5px;
    padding:25px;
    text-align:center;
    font:20pt bold,"Vollkorn";
    color:#bbb
  }
</style>


</head>
<body>
<div id="drop_zone">Drop netlist file here</div>
<div id="visualization" style="width: 700px; height: 700px;"></div>

<script type="text/javascript">

//////////////////
// For drag-n-drop
//////////////////

  if (window.File && window.FileReader && window.FileList && window.Blob) {
    // Great success! All the File APIs are supported.
  } else {
    alert('The File APIs are not fully supported in this browser. Consider using one from http://www.html5rocks.com/en/features/file_access');
  }

  function handleFileSelect(evt) {
    evt.stopPropagation();
    evt.preventDefault();

    var files = evt.dataTransfer.files; // FileList object.

    // files is a FileList of File objects. List some properties.
  }

  function handleDragOver(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
  }

  // Setup the dnd listeners.
  var dropZone = document.getElementById('drop_zone');
  dropZone.addEventListener('dragover', handleDragOver, false);
  dropZone.addEventListener('drop', handleFileSelect, false);

////////////////////
// For visualization
////////////////////

  function drawVisualization() {
    // Create and populate the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('number', 'X');
    data.addColumn('number', 'Shape 1');
    for (var i = 0; i < 500; i++) {
      data.addRow([Math.sin(i / 25), Math.cos(i / 10) * 0.5]);
    }

    // Create and draw the visualization.
    var chart = new google.visualization.ScatterChart(document.getElementById('visualization'));
    var options =  {
      title: 'Distribution of Gates in NetList',
      hAxis: {title: 'X', minValue: 0, maxValue: 100, gridlines: {count:8}},
      vAxis: {title: 'Y', minValue: 0, maxValue: 100, gridlines: {count:8}},
      legend: 'none',
      populateintSize: 1,
      height: 700,
      width: 700,
      tooltip: {trigger: 'none'}
    };
    chart.draw(data, options);
  }

  google.setOnLoadCallback(drawVisualization);
</script>
</body>
</html>

